kernel:
  build: kernel
  environment:
    - AWS_ACCESS
    - AWS_SECRET
    - AWS_REGION
    - DEVELOPMENT=true
  ports:
    - 5000:5000
  volumes:
    - kernel:/go/src/github.com/ddollar/convox/kernel
  links:
    - builder
    - registry
builder:
  build: builder
  environment:
    - DEVELOPMENT=true
  ports:
    - 5100:5000
registry:
  image: convox/registry
  environment:
    - REGISTRY_CERT_PUBLIC
    - REGISTRY_CERT_PRIVATE
    - S3_ENV_AWS_ACCESS
    - S3_ENV_AWS_SECRET
    - S3_ENV_AWS_BUCKET
    - S3_ENV_PORT_80_TCP_ADDR
    - S3_ENV_PORT_80_TCP_PORT
  ports:
    - 5200:443
  links:
    - redis
redis:
  image: convox/redis
  ports:
    - 5300:6379
s3:
  image: convox/s3
  ports:
    - 5400:80
