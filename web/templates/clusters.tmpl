{{ define "title" }} Clusters {{ end }}

{{ define "body" }}
	<ul class="breadcrumb">
		<li class="active">Clusters</li>
	</ul>
	<table class="table table-striped table-bordered">
		<thead>
			<tr class="title">
				<th colspan="5">
					<button class="btn btn-success btn-xs" data-toggle="modal" data-target="#cluster-create">Create Cluster</button>
					Active Clusters
				</th>
			</tr>
			<tr>
				<th class="expand">Name</th>
				<th>Status</th>
				<th>CPU</th>
				<th>RAM</th>
				<th>Disk</th>
			</tr>
		</thead>
		<tbody>
			{{ range $cluster := . }}
				{{ template "cluster" $cluster }}
			{{ end }}
		</tbody>
	</table>
	{{ template "modals" }}
{{ end }}

{{ define "cluster" }}
	<tr>
		<td class="expand">
			<a href="/clusters/{{ .Name }}">{{ .Name }}</a>
		</td>
		<td>
			<div class="status">{{ .Status }}</div>
		</td>
		<td>{{ meter "cpu"    .CpuUsed    .CpuTotal    }}</td>
		<td>{{ meter "memory" .MemoryUsed .MemoryTotal }}</td>
		<td>{{ meter "disk"   .DiskUsed   .DiskTotal   }}</td>
	</tr>
{{ end }}

{{ define "modals" }}
	<div class="modal fade" id="cluster-create" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<form method="post" action="/clusters" class="form-horizontal">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">Create Cluster</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label for="cluster-name" class="col-sm-3 control-label">Cluster Name</label>
							<div class="col-sm-8">
								<input name="name" type="text" class="form-control" id="cluster-name">
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
						<input type="submit" class="btn btn-primary" value="Create Cluster">
					</div>
				</form>
			</div>
		</div>
	</div>
{{ end }}
